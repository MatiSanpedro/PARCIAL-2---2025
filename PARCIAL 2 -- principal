import pygame as pg
import time
from PARCIAL_2_funciones import *
from PARCIAL_2_configuraciones import * 
import os

correccion_tamaño_menu = pg.transform.scale(pantalla, (900,700)) #esto corrige el tamaño del fondo 



#Bucle principal
while True:
    reloj.tick(60)
    
    
    for evento in pg.event.get():
        if evento.type == pg.QUIT:
            pg.quit()
            quit()

        match pantalla_actual:
            case "inicio": #este case es la pantalla principal del menu

                pantalla.blit(correccion_fondo_pantalla,(0,0)) #fondo de pantalla

                pantalla.blit(nivel,(300,100)) #boton 1 
                pantalla.blit(texto1,(390, 100)) #texto 1

                pantalla.blit(jugar,(300,245))#boton2
                pantalla.blit(texto_2,(390,245))#texto2

                pantalla.blit(boton_puntaje,(300,390))#boton3
                pantalla.blit(texto_3,(354, 390))#texto3
                
                pantalla.blit(boton_salida,(300,540)) #boton4
                pantalla.blit(texto_4,(360,540))#texto4 
                
                #eventos del mouse 
                if evento.type == pg.MOUSEBUTTONDOWN: 
                    if evento.button == 1: #click derecho 
                        posicion = evento.pos   #posicion del click
                        print(f"click en {posicion}")

                        if boton1.collidepoint(posicion):#click boton1 "Nivel"                
                            pantalla_actual = "nivel"
                            print("Nivel Presionado")

                        elif boton2.collidepoint(posicion):#click boton2 "Jugar"
                            pantalla_actual = "jugar"
                            print("Jugar presionado")


                        elif boton3.collidepoint(posicion): #click boton3 "Ver Puntaje"
                            pantalla_actual = "ver puntaje"
                            print("Puntaje presionado")
                        
                        elif boton4.collidepoint(posicion): #click boton4 "Salir"
                            print("saliendo del juego.")
                            pg.quit()
                            quit()



            case "jugar":
                
                pantalla.fill((0, 0, 0))#color de fondo de pantalla durante el juego
                
                pantalla_actual = pausar_juego(evento,pantalla_actual) #controlador de pantalla
                #ESC = volver a inicio

                #celdas
                celdas_sector_1 = dibujar_cuadrados(pantalla,50,3,3,150,150) #sector 1
                celdas_sector_2 = dibujar_cuadrados(pantalla,50,3,3,300,150) #sector 2
                celdas_sector_3 = dibujar_cuadrados(pantalla,50,3,3,450,150) #sector 3
                celdas_sector_4 = dibujar_cuadrados(pantalla,50,3,3,150,300) #sector 4
                celdas_sector_5 = dibujar_cuadrados(pantalla,50,3,3,300,300) #sector 5
                celdas_sector_6 = dibujar_cuadrados(pantalla,50,3,3,450,300) #sector 6
                celdas_sector_7 = dibujar_cuadrados(pantalla,50,3,3,150,450) #sector 7 
                celdas_sector_8 = dibujar_cuadrados(pantalla,50,3,3,300,450) #sector 8
                celdas_sector_9 = dibujar_cuadrados(pantalla,50,3,3,450,450) #sector 9 
                
                dibujar_lineas(pantalla) #son las 4 lineas que separan los 9 espacios de la cuadricula
                
                #Detector de colisiones:
                if evento.type == pg.MOUSEBUTTONDOWN:
                    posicion = (evento.pos) #posicion 
                    detectar_colisiones(evento,posicion,celdas_sector_1)#colisiones sector 1
                    detectar_colisiones(evento,posicion,celdas_sector_2)#colisiones sector 2
                    detectar_colisiones(evento,posicion,celdas_sector_3)#colisiones sector 3
                    detectar_colisiones(evento,posicion,celdas_sector_4)#colisiones sector 4 
                    detectar_colisiones(evento,posicion,celdas_sector_5)#colisiones sector 5
                    detectar_colisiones(evento,posicion,celdas_sector_6)#colisiones sector 6
                    detectar_colisiones(evento,posicion,celdas_sector_7)#colisiones sector 7
                    detectar_colisiones(evento,posicion,celdas_sector_8)#colisiones sector 8
                    detectar_colisiones(evento,posicion,celdas_sector_9)#colisiones sector 9

            case "ver puntaje":
                pass
            

        #funcion_mouse(evento) #mouse        
        
        
            


    
    
          

    
    

    pg.display.flip()


'''
match pantalla_actual:
            
            case "inicio":
                pantalla.blit(correccion_fondo_pantalla,(0,0)) #fondo de pantalla

                pantalla.blit(nivel,(300,100)) #boton 1 
                pantalla.blit(texto1,(390, 100)) #texto 1

                pantalla.blit(jugar,(300,245))#boton2
                pantalla.blit(texto_2,(390,245))#texto2

                pantalla.blit(boton_puntaje,(300,390))#boton3
                pantalla.blit(texto_3,(354, 390))#texto3
                
                pantalla.blit(boton_salida,(300,540)) #boton4
                pantalla.blit(texto_4,(360,540))#texto4 


                if evento.type == pg.MOUSEBUTTONDOWN:
                    posicion = (evento.pos)
                    if evento.button ==1:
                        print("  ")

                    if boton1.collidepoint(posicion):                
                        pantalla_actual = "nivel"

                    elif boton2.collidepoint(posicion):
                        pantalla_actual = "jugar"
                        
                    elif boton3.collidepoint(posicion):
                        pantalla_actual = "ver puntaje"

                    elif boton4.collidepoint(posicion):
                        pg.quit()
                        quit()
                            

            case "nivel":
                pass
            
            case "jugar":

'''
