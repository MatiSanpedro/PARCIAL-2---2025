import pygame as pg 
import random 

#matrices 
def iniciar_matriz(cantidad_filas,cantidad_columnas,valor_inicial)->list:
    matriz = []
    for i in range(cantidad_filas):
        fila = [valor_inicial] * cantidad_columnas

        matriz += [fila]

    return matriz 



#generar numeros
def generar_numeros():
    matriz = []
    for i in range(9):
        numero = 1
        numero +=1
        matriz.append(numero)
       # matriz.sort= reverse

    return matriz 




#escenario 

def dibujar_escenario_simple(pantalla, tamaño:int,columna:int,fila:int):

    for filass in range(fila):
        for columnass in range(columna): 
            rectangulo_agua = pg.Rect(columnass * tamaño, filass * tamaño, tamaño, tamaño)
            pg.draw.rect(pantalla, (0,0,200), rectangulo_agua) #cuadrados 
            pg.draw.rect(pantalla, (0,0,0), rectangulo_agua, 1) #lineas, bordes
            



#dibujar los barcos (requiere la matriz)
#esto ademas de dibujarlos en pantalla, devuelve los rectangulos que dibuje en una lista 


def dibujar_barcos(pantalla,matriz:list,tamaño):

   

    for filass in range(len(matriz)):
        for columnass in range(len(matriz[0])):
            
            if matriz[filass][columnass] == 1:
                rectangulo = pg.Rect(columnass * tamaño, filass * tamaño, tamaño, tamaño)
                pg.draw.rect(pantalla,(0,0,200),rectangulo)
                pg.draw.rect(pantalla, (0, 0, 0), rectangulo, 1)
                
                
                    
    
    

            

#Teclado:
def funcion_teclado(evento):
        if evento.type == pg.KEYDOWN:
            if evento.key == pg.K_ESCAPE:
                pass
                
            elif evento.key == pg.K_p:
                pg.mixer.music.pause()
            elif evento.key == pg.K_m:
                pg.mixer.music.stop()
            

        if evento.type == pg.KEYUP:
            print(" ")
        
#Mouse:
def funcion_mouse(evento):
    if evento.type == pg.MOUSEBUTTONDOWN:
        posicion = (evento.pos)
        print(f"click en{posicion}")
        if evento.button == 1:
            print("click izquierdo presionado")
        if evento.button == 3:
            print("click derecho presionado")
    
    

    


def mouse_de_inicio(boton1,boton2,boton3,boton4,evento,posicion):
    if evento.type == pg.MOUSEBUTTONDOWN:
        if evento.button ==1:
            print("  ")

        if boton1.collidepoint(posicion):                
            pantalla_actual = "nivel"

        elif boton2.collidepoint(posicion):
            pantalla_actual = "jugar"
            
        elif boton3.collidepoint(posicion):
            pantalla_actual = "ver puntaje"

        elif boton4.collidepoint(posicion):
            pg.quit()
            quit()


        return pantalla_actual




#funcion volver atras
def pausar_juego(evento,pantalla_actual):
    if evento.type == pg.KEYDOWN:
        if evento.key == pg.K_ESCAPE:
            pantalla_actual = "inicio"
            print("Juego Pausado.")
    
    return pantalla_actual



#pausa - despausa
def pausar_despausar(evento):
    if evento.type == pg.KEYDOWN:
        if evento.key == pg.K_p: # P = pausa 
            pg.mixer.music.pause()
            print("sonido pausado")
        if evento.key == pg.K_o: #O = despausa
            pg.mixer.music.unpause()
            print("Sonido reanudado")



#REINICIAR | requiere que le pase "evento" y "bandera_barcos"
def reiniciar_partida(evento,booleano,pantalla_actual,disparos_realizados,disparos_acertados,puntaje): 
    if evento.type == pg.KEYDOWN and evento.key ==pg.K_r:
        booleano = False
        disparos_realizados.clear() #vacio la lista de disparos para reiniciar la funcion
        disparos_acertados.clear()
        puntaje[0] -= puntaje[0]
        

    return booleano


'DIBUJOS EN PANTALLA'


#esto usa de parametros:
#1 Pantalla principal 
#2 tamaño de los cuadrados 
#3 cantidad de columnas
#4 cantidad de filas
#5  X desde donde comienza a dibujarse
#6 Y desde donde comienza a dibujarse

#dibuja los cuadraditos: 
def dibujar_cuadrados(pantalla, tamaño:int, columna:int, fila:int, x_inicial:int, y_inicial:int):     
    lista_retorno_de_cuadrados = []

    for filass in range(fila):
        for columnass in range(columna):
            rectangulo_azul = pg.Rect(x_inicial + columnass * tamaño, y_inicial + filass * tamaño,tamaño,
                tamaño 
                )
            pg.draw.rect(pantalla, (0, 0, 200), rectangulo_azul)      # cuadrados azules
            pg.draw.rect(pantalla, (0, 0, 0), rectangulo_azul, 1)     # bordes negros

            lista_retorno_de_cuadrados.append(rectangulo_azul)
            #retorna los cuadrados para usarlos despues en .collidepoint


    return lista_retorno_de_cuadrados




#lineas separadoras:
def dibujar_lineas(pantalla):
    #verticales             #color     #inicio     #fin
    pg.draw.line(pantalla, (0, 0, 0), (450, 150), (450,600), 6)
    pg.draw.line(pantalla, (0, 0, 0), (300, 150), (300,600), 6)
    
    #horizontales
    pg.draw.line(pantalla, (0, 0, 0), (150,300), (600,300), 6)
    pg.draw.line(pantalla, (0, 0, 0), (150,450), (600,450), 6)




#dibujar todo
def dibujar_todos_los_cuadrados(pantalla):
    
    celdas_sector_1 = dibujar_cuadrados(pantalla,50,3,3,150,150) #sector 1
    celdas_sector_2 = dibujar_cuadrados(pantalla,50,3,3,300,150) #sector 2
    celdas_sector_3 = dibujar_cuadrados(pantalla,50,3,3,450,150) #sector 3
    celdas_sector_4 = dibujar_cuadrados(pantalla,50,3,3,150,300) #sector 4
    celdas_sector_5 = dibujar_cuadrados(pantalla,50,3,3,300,300) #sector 5
    celdas_sector_6 = dibujar_cuadrados(pantalla,50,3,3,450,300) #sector 6
    celdas_sector_7 = dibujar_cuadrados(pantalla,50,3,3,150,450) #sector 7 
    celdas_sector_8 = dibujar_cuadrados(pantalla,50,3,3,300,450) #sector 8
    celdas_sector_9 = dibujar_cuadrados(pantalla,50,3,3,450,450) #sector 9 


#detecta las colisiones dentro de los cuadrados 
#recibe el evento del mouse, la posicion y una tupla para iterar con enumerate

def detectar_colisiones_ingresar_texto(evento,pos,cuadrados):
    cuadrado_seleccionado = False
    numero_ingresado = "" 
    for i, rect in enumerate(cuadrados):
        if rect.collidepoint(pos):
           print(f"Hiciste clic en la celda número {i} en posición {rect.topleft}")
           cuadrado_seleccionado = True

        else:
            cuadrado_seleccionado = False
        
        #condicion valida = seleccionar un cuadrado y apretar una tecla numerica
        if evento.type == pg.KEYDOWN and cuadrado_seleccionado == True:
            if evento.key == pg.BACKSPACE: #tecla borrar
                numero_ingresado = ""
            elif evento.unicode.isdigit():# validacion de números
                numero_ingresado = evento.unicode #
            
            


